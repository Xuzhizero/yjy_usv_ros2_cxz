# Current 洋流模块分析

## 模块功能说明

**Current（洋流）**模块用于模拟环境中的恒定水流（洋流）对船舶的影响。洋流可以视为一个固定方向和速度的水流，船舶在其中运动时会感受到相对流体速度的变化。该模块输出一个表示洋流速度的矢量，用于下游计算相对速度、阻力和附加力等。

物理上，洋流是指大尺度、较为恒定的水体运动，例如海洋中的暖流寒流等。对于船舶动力学模拟，我们通常假设洋流在模拟区域内是均匀的且不随时间变化。船舶运动方程中，洋流不会直接对船施加力，但会改变船相对于水的速度，从而改变粘滞阻力、附加质量力等水动力效应。例如，如果船以$5\ \text{m/s}$向东航行，而有$2\ \text{m/s}$向东的洋流，那么相对于水的速度仅$3\ \text{m/s}$向东，阻力会因此降低。反之逆流航行阻力增大。

因此，**洋流模块的主要功能**是提供一个恒定的流速$\mathbf{v}_{curr}$，以供后续模块计算**相对流速**$\mathbf{v}_{rel}$使用。

## 输入输出端口

### 输入

通常无显式输入。洋流参数（速度大小和方向）由用户在初始化时设定为模块内部参数。例如通过Simulink对话框或上层配置设定"流速 = 2 m/s，方向 = East"之类。若需要动态改变洋流，可在更高层Scenario模块实现，但当前假设恒定。

### 输出

**Current Velocity (洋流速度)** 信号，类型为三维向量 (3×1)。典型地在惯性系下给出，如_NED坐标系_中的$(V_{N}, V_{E}, V_{D})$。常见情形是洋流仅有水平分量，垂直分量为0。例如：

- 洋流速度$\mathbf{v}_{curr} = (V_x,\ V_y,\ 0)$，其中$V_x, V_y$根据给定洋流速度大小和方向计算。
- 若采用北东下(NED)坐标，$V_x$对应北向速度，$V_y$对应东向速度，$V_z$对应下向（通常$0$）。
- 如果洋流方向以航向角$\beta$表示，相对于正北方向，速度大小为$V_c$，则：
  $$\mathbf{v}_{curr}=(V_c\cos\beta,\ V_c\sin\beta,\ 0)$$

该输出向量会送往**Relative Velocity**模块，与船体在惯性系的速度做比较计算相对速度。

此外，如果仿真中需要，可将$\mathbf{v}_{curr}$用于环境力估计（例如计算流压拖曳力），但目前主要用途是速度差的计算。

## 核心参数与公式

洋流模块本身并不涉及复杂计算，只是根据设定输出常量向量。然而理解设定洋流参数如何影响仿真是必要的：

### 速度方向与分量

一般以正北为0°方位角$\beta$测量洋流方向（顺时针为东向）。给定$\beta$和速度标量$V_c$：

$$V_{curr,N}=V_c\cos\beta, \quad V_{curr,E}=V_c\sin\beta, \quad V_{curr,D}=0$$

例如$\beta=90°$表示洋流向东，则$\mathbf{v}_{curr}=(0,\ V_c,\ 0)$。

### 相对速度计算

下游**Relative Velocity**模块将使用：

$$\mathbf{v}_{rel} = \mathbf{v}_{ship} - \mathbf{v}_{curr}$$

若$\mathbf{v}_{ship}$以$(u_N,\ v_E,\ w_D)$表示船在惯性系的速度，则：

$$\mathbf{v}_{rel} = (u_N - V_{curr,N},\ v_E - V_{curr,E},\ w_D - V_{curr,D})$$

在通常情况下$V_{curr,D}=0$，因为洋流无垂直分量。

### 影响范围

在仿真中保持$\mathbf{v}_{curr}$恒定意味着假设研究范围内洋流均匀，不考虑如涡流或随位置变化的流场。这对模拟长时间恒稳航行是合理的。但若需要模拟如靠岸流减弱等情景，可扩展模块加入位置相关函数。

## 总结

**洋流模块**为仿真的船体提供了一个背景流场。正确设置这个参数对于模拟实际海洋情形（顺流、逆流航行等）的阻力变化非常重要。
