# Earth 地球参数模块分析

## 模块功能说明

**Earth（地球参数）**模块主要提供地球物理常数和参考系信息，最重要的是重力加速度值和惯性坐标系的定义。在船舶运动仿真中，需要一个惯性参考系（通常采用地球固定系近似）以及重力方向和大小，以计算重力和浮力等力。

本模块可以理解为仿真的"环境基准"设定：

- **重力加速度 $g$：** 提供标准重力的数值，用于计算重力和浮力。通常$g=9.81\ \text{m/s}^2$。

- **坐标系定义：** 明确惯性系和船体系的方向关系。通常假设惯性系为东北天(NED)或东北地(ENU)系。在海洋仿真中常用NED（北、东、下）惯性系，这样重力为正值沿下轴方向。船体坐标系则通常取舰体质心处、x轴指向艏向、y轴指向右舷、z轴指向下方的右手坐标系（符合航海学惯例）。

- **其他物理量：** 若需要，此模块也可提供地球自转参数（科里奥利力对大范围运动的影响）等。不过在小型船舶仿真中通常忽略地球自转导致的科氏力。

总之，Earth模块确保仿真中**重力方向和幅值**是一致正确的，并为后续模块（如静力恢复力计算）提供必要的常量。

## 输入输出端口

### 输入

Earth模块通常无动态输入。它的参数（如重力加速度值、惯性系定义）在模型构建时设定好。不排除在某些仿真场景中通过上层配置改变$g$值以模拟不同重力环境，但一般海洋仿真中$g$恒定。

### 输出

主要输出**重力加速度**常量，以及用于变换矩阵的姿态基准。如果仿真采用了更复杂的坐标变换，Earth模块可能输出一个表示**惯性系到地固系**的方向余弦矩阵或类似结构。但在当前模型里，没有明确提到此类矩阵，因此推测输出包括：

- 标量形式的$g$（9.81）。
- 或三维重力矢量$\mathbf{g}_{n}=(0, 0, 9.81)$在惯性系下表示。如果NED系下，重力矢量指向下方。
- 如果模型需要，将$g$传递给**Hydrostatic**模块用于计算重量$W=mg$和浮力$B=\rho g V$。
- 坐标变换信息通常隐含在Kinematics模块中通过姿态角计算，因此Earth模块可能不直接输出变换矩阵。但它定义了初始对齐：如初始时惯性系和地球系重合，无偏差。

例如，在Simulink中，Earth模块可能只是Constant块输出值9.81，接到静力恢复模块的重力加速度输入端；或者提供NED基准向量$(0,0,1)$给某些需要的计算模块。

## 核心参数

### 重力加速度 $g$

标准值为$9.81\ \text{m/s}^2$（也可根据地理位置细微调整，例如高纬度略大，但通常忽略）。这个值被用于计算船舶的重量（$W=m g$）和浮力（$B=\rho g V$）。在静态平衡时$W=B$。在本模型中假定$g$恒定不变。

### 惯性参考系

采用NED惯性系意味着重力作用在正$z$方向（向下），浮力方向与之相反向上（负$z$方向）。这样，在小角度情况下，俯仰角$\theta$和横滚角$\phi$产生的恢复力矩可以近似认为绕固定水平轴发生。同时，NED系使得东向为+$y$轴，北向为+$x$轴，符合航迹角和方位角的常用定义。

### 地转科氏力

一般不在此模块计算。地球自转引起的科氏加速度$f_c = 2\boldsymbol{\omega}_{earth}\times \mathbf{v}$对缓慢移动的船相对很小，可忽略。所以模型中未考虑。

### 局部平坦假设

地球被视为平坦局部参考系，没有考虑经纬度变化。对于短时间小范围仿真这是合理的。

## 总结

Earth模块为仿真提供了"地球"这个舞台的基本参数，使模型中的船舶"知道"哪个方向是下、重力有多大。这些信息虽然简单，却对仿真结果有基础性的影响。
