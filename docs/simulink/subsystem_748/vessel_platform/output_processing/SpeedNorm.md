# Speed Norm 航速计算模块分析

## 模块功能说明

**Speed Norm（航速范数）**模块计算船舶的总航速大小，即速度矢量的模（norm）。这是一个标量输出，表示船舶在空间中移动的快慢，不考虑方向。

### 主要用途

- **航行监控**：实时显示船舶航速
- **性能评估**：评估推进系统效率
- **控制反馈**：速度控制回路的测量值
- **能耗估算**：阻力与速度相关，航速是能耗计算的关键输入

## 输入输出端口

### 输入

根据所需的航速类型，输入可能包括：

1. **对地航速（Speed Over Ground, SOG）**：
   - NED系下速度$(V_N, V_E, V_D)^T$

2. **对水航速（Speed Through Water, STW）**：
   - 相对速度$\nu_r = (u_r, v_r, w_r)^T$

3. **船体系速度**：
   - $(u, v, w)^T$

### 输出

- **航速 $V$**：标量值，单位为m/s或节（knots）

## 核心计算公式

### 三维航速

$$V = \sqrt{V_N^2 + V_E^2 + V_D^2}$$

或在船体系中：
$$V = \sqrt{u^2 + v^2 + w^2}$$

### 水平面航速

对于水面船舶，通常只考虑水平分量：

$$V_{horizontal} = \sqrt{V_N^2 + V_E^2} = \sqrt{u^2 + v^2}$$

（忽略垂向速度$w$或$V_D$）

### 前向航速

有时仅关注沿船首方向的速度：

$$V_{forward} = u$$

### 对水航速

$$V_{STW} = \sqrt{u_r^2 + v_r^2 + w_r^2}$$

## 单位转换

| 单位 | 换算关系 |
|------|----------|
| m/s | 基准单位 |
| km/h | 1 m/s = 3.6 km/h |
| knots (节) | 1 m/s ≈ 1.944 knots |
| mph | 1 m/s ≈ 2.237 mph |

航海中常用节（knots）作为速度单位：
$$V_{knots} = V_{m/s} \times 1.9438$$

## 不同航速类型

### 对地航速（SOG）

$$SOG = \|\mathbf{V}_{NED}\| = \sqrt{V_N^2 + V_E^2 + V_D^2}$$

这是船舶相对于地面（惯性系）的移动速度，GPS直接测量的就是这个值。

### 对水航速（STW）

$$STW = \|\mathbf{V}_{r}\| = \sqrt{u_r^2 + v_r^2 + w_r^2}$$

这是船舶相对于水的移动速度，决定了水动力阻力的大小。

### 关系

$$\mathbf{V}_{SOG} = \mathbf{V}_{STW} + \mathbf{V}_{current}$$

在有洋流的情况下，SOG和STW会有差异。

## 与其他模块的关系

- **6DOF模块**：提供船体速度$\nu$
- **Kinematics模块**：提供NED系速度
- **Relative Velocity模块**：提供相对速度$\nu_r$
- **CourseAngle模块**：使用相同的速度输入

## Simulink实现

```
输入:
  - V_N, V_E, V_D: NED系速度分量 (m/s)
  或
  - u, v, w: 船体系速度分量 (m/s)

处理:
  1. 计算速度矢量的欧几里得范数
  2. V = sqrt(V_N^2 + V_E^2 + V_D^2)
  3. (可选) 转换单位到knots

输出:
  - V: 航速标量 (m/s 或 knots)
```

## 计算示例

### 示例1：直线前进

- $u = 10$ m/s, $v = 0$ m/s, $w = 0$ m/s
- $V = \sqrt{10^2 + 0^2 + 0^2} = 10$ m/s ≈ 19.4 knots

### 示例2：带横漂的航行

- $u = 8$ m/s, $v = 6$ m/s, $w = 0$ m/s
- $V = \sqrt{8^2 + 6^2 + 0^2} = \sqrt{100} = 10$ m/s

虽然前向速度只有8 m/s，但总航速是10 m/s。

### 示例3：带洋流的情况

假设：
- 船体对水速度：$u_r = 5$ m/s（纯前向）
- 洋流速度：2 m/s向东

则：
- STW = 5 m/s
- SOG = $\sqrt{(5\cos\psi + 0)^2 + (5\sin\psi + 2)^2}$（取决于航向）

## 航速与阻力关系

阻力通常与速度的平方成正比：

$$F_D = \frac{1}{2}\rho C_D A V^2$$

因此，航速翻倍会导致阻力增加4倍。这是Speed Norm模块输出的重要应用之一。

## 注意事项

1. **参考系选择**：明确输出的是SOG还是STW

2. **维度一致性**：确保所有速度分量使用相同单位

3. **数值稳定性**：速度接近零时避免数值问题

4. **滤波处理**：实际应用中可能需要对速度进行低通滤波

## 扩展功能

### 加速度

可以通过对Speed Norm求导得到切向加速度：

$$a_t = \frac{dV}{dt}$$

### 平均航速

长时间航行的平均航速：

$$V_{avg} = \frac{1}{T}\int_0^T V(t) dt$$

## 总结

Speed Norm模块提供了船舶运动状态的基本标量度量。无论是对地航速还是对水航速，这个值都是监控船舶性能、估算能耗和进行速度控制的基础。结合CourseAngle模块，可以完整描述船舶在水平面上的运动状态。
