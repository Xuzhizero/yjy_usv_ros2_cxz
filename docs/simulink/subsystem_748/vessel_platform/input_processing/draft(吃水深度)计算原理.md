# Draft(吃水深度)模块分析

## 模块功能说明

**Draft（吃水深度）**模块根据排水体积和浮筒几何参数计算船舶的吃水深度$T$。吃水深度是船舶浸入水中的垂直距离，是船舶静水力学的基本参数。

## 输入输出端口

### 输入

| 端口 | 变量名 | Simulink信号名 | 物理含义 | 单位 |
|------|--------|----------------|----------|------|
| 1 | $\nabla$ | nabla (来自Volume模块) | 排水体积 | m³ |

内部使用的常量：

| 常量名 | Simulink变量名 | 值 | 说明 |
|--------|----------------|-----|------|
| 浮筒数量 | Constant | 2 | 双体船浮筒数量 |
| 方形系数 | Constant1 | Cb_pont | 浮筒方形系数 |
| 浮筒宽度 | Constant2 | B_pont | 浮筒宽度 (m) |
| 浮筒长度 | Constant3 | L | 浮筒长度 (m) |

### 输出

| 端口 | 变量名 | Simulink信号名 | 物理含义 | 单位 |
|------|--------|----------------|----------|------|
| 1 | $T$ | Draft (m) | 吃水深度 | m |

## Simulink变量对应关系表

| 物理量符号 | Simulink变量名 | 计算公式/来源 | 说明 |
|------------|----------------|---------------|------|
| $\nabla$ | nabla | 输入端口1 | 排水体积 |
| $N$ | Constant | 2 | 浮筒数量 |
| $C_b$ | Cb_pont | Constant1 | 方形系数 |
| $B$ | B_pont | Constant2 | 浮筒宽度 |
| $L$ | L | Constant3 | 浮筒长度 |
| $\nabla/N$ | Divide1输出 | $\nabla / 2$ | 单浮筒分配体积 |
| $\nabla/(N \cdot C_b)$ | Divide2输出 | 上一步 $/C_b$ | 中间结果 |
| $\nabla/(N \cdot C_b \cdot B)$ | Divide3输出 | 上一步 $/B$ | 中间结果 |
| $T$ | Divide4输出 / Draft (m) | 上一步 $/L$ | 最终吃水深度 |

## 核心计算公式

$$
\boxed{
T = \frac{\nabla}{N \cdot C_b \cdot L \cdot B}
}
$$

对于双体船（$N=2$）：
$$T = \frac{\nabla}{2 \cdot C_b \cdot L \cdot B}$$

---

## 提问
<img width="1222" height="112" alt="image" src="https://github.com/user-attachments/assets/a989a686-2ddc-465f-908c-ea5fe414efca" />

这是input processing模块中的draft子模块

<div align="center">
  <img src="https://cdn.nlark.com/yuque/0/2025/png/2408029/1752652778980-b94de14b-408e-439a-84a3-46da22579acd.png" alt="Draft模块内部构造">
</div>

这个是draft(m)模块的具体内部构造，如前述，这个模块的输出是吃水深度，然后输入nabla是排开水的体积。告诉我其他的输入的含义，以及为什么可以通过这样的构造得到吃水深度？

---

## 回答

下面给出各输入的物理含义，以及为什么这么一连串除法能算出吃水 $T$。

### 输入含义

+ **nabla**：排水体积，也就是船体及载荷排开水的总体积 $V$。（Simulink中标记为"nabla"）
+ **2**：浮筒数量 $N$。本例是双体船，有两个相同的浮筒，所以要除以 2。
+ **Cb_pont**：浮筒的方形系数（block coefficient）

$$C_b = \frac{\text{实际浮筒排水体积}}{L \times B \times T}$$

它表征筒体截面与长方体的体积比，用于把理想棱柱体积换算成真实体积。

+ **B_pont**：单个浮筒的横梁宽度（beam of pontoon，单位 m）。
+ **L**：单个浮筒的有效水线长度（length，单位 m）。

---

### 数学原理

对于每个浮筒，如果把它近似看成一个长 $L$、宽 $B$、高 $T$ 的棱柱体，再乘以方形系数 $C_b$，就得到该筒体的排水体积：

$$V_\text{pontoon} = C_b \, L \, B \, T$$

双体船总排水量就是两个筒体之和：

$$V = N \times C_b \, L \, B \, T\quad (N=2)$$

解出吃水 $T$：

$$T = \frac{V}{N\,C_b\,L\,B}$$

---

### Simulink 中的实现

1. **先除以 2**：

$$V / 2 = \text{每个浮筒分得的体积}$$

2. **再除以 Cb_pont**：

$$\frac{V/2}{C_b} = L\,B\,T$$

3. **再除以 B_pont**：

$$\frac{L\,B\,T}{B} = L\,T$$

4. **最后除以 L**：

$$\frac{L\,T}{L} = T$$

因此把这四个量（2、$C_b$、$B$、$L$）串联成一个多输入"÷"模块，就能一步一步把总体积 $V$ 转换成吃水深度 $T$。

---

## 继续追问

为了知道吃水深度，需要知道由浮筒简化为棱柱体的所需方形系数，这个系数该如何确定呢？注意：我们不能在求方形系数时使用吃水深度T，因为这个时候我们还不知道。

---

## 回答

在这一步，你要确定的是"几何形状"决定的方形系数，而不是"吃水"决定的。也就是说，方形系数只和浮筒的几何体型—长、宽、高以及实际的体积分布—有关，和你真正让它沉入水里的深度（T）无关。下面几种方法都能在不知道T的情况下给你一个 $C_B$ 值：

---

### 方法一：直接从 CAD/模型中计算几何体积

1. **在 CAD 软件或通过网格模型（STL、OBJ 等）** 把单个浮筒的真实体积 $V_\text{geom}$ 计算出来。

2. 取已知的浮筒外廓尺寸：
    - 长度 $L$
    - 最大宽度（梁宽） $B$
    - 最大高度（筒高） $H$

3. 按定义计算方形系数：

$$C_b = \frac{V_\text{geom}}{L \times B \times H}$$

这里的 $H$ 是浮筒结构的最大可能吃水（或者说最大外廓高度），**它不用是真正的工作吃水**，只是一个几何参考值。

这样一来，你就得到了一个和T无关的、由几何形状决定的 $C_b$。

---

### 方法二：用数学公式/积分近似

如果你只有截面方程或者截面图，也可以自己做积分：

$$V_\text{geom} = \int_{z=0}^{H} A(z)\,\mathrm{d}z$$

其中 $A(z)$ 是高度 $z$ 处的横截面积；再同样除以 $L B H$ 就得 $C_b$。

---

### 方法三：经验取值（参考类似艇型）

+ **圆柱体浮筒**：如果截面近似圆形，理论上 $C_b\approx\pi/4\approx0.785$。
+ **常见多边形截面**：根据手册或论文，双体船浮筒常见取值在 0.6–0.8 之间。

你可以先查到同样尺寸、同样截面形状的浮筒设计，取一个典型 $C_b$，再用刚才那个 Simulink 模块算吃水。

---

### 为什么这样做能算出吃水 T？

一旦你有了

+ 总排水量 $V$（即 Simulink 里算好的 nabla）
+ 结构几何决定的 $C_b$
+ 浮筒的 $L, B$
+ 双体船数目 $N$（这里为 2）

方程就只有一个未知量 $T$ 了：

$$V = N \times C_b \,L\,B\,T \quad\Longrightarrow\quad T = \frac{V}{N\,C_b\,L\,B}$$

Simulink 里对这四个量做一连串"÷"运算，正是把 $V$ 一步步"拆"成 $T$。

---

## 总结

> **关键在于把方形系数 $C_b$ 作为一个只和"几何形状"有关的常数来预先确定，绝不依赖于未知的吃水深度 $T$。**
>
> 你可以通过 CAD 直接量体积、或几何积分，也可参考同类艇型的经验值，来得到 $C_b$。然后代入上式，一下子就能求出真正的吃水 $T$。

