# Added Mass 附加质量模块分析

## 模块功能说明

**Added Mass（附加质量）**模块计算或提供船体在水中加速运动时，因带动周围水体运动而产生的等效惯性质量矩阵$M_A$。附加质量是流体动力学中的重要概念——当船加速时，它不仅需要克服自身惯性，还需要加速其周围的一层流体。这层流体的惯性表现如同给船增加了额外的质量。

### 物理背景

当船体在水中加速时，周围的水也必须跟着加速移动（因为水不能穿透船体）。这部分被加速的水的惯性反作用力作用在船上，其效果等同于船的质量增加了一个"附加质量"。

附加质量的大小取决于：
- **船体形状**：细长体的附加质量较小，宽扁体的附加质量较大
- **运动方向**：不同方向上的附加质量通常不同
- **频率**：高频运动时附加质量可能略有变化，但低频或准静态时可视为常数

### 模块作用

本模块的主要功能是输出6×6附加质量矩阵$M_A$，该矩阵与刚体惯性矩阵$M_{RB}$相加形成总惯性矩阵$M = M_{RB} + M_A$。这一总惯性矩阵用于6DOF动力学方程：

$$(M_{RB} + M_A)\dot{\nu} = \tau_{net} - C(\nu)\nu - D(\nu)\nu + \tau_g$$

## 输入输出端口

### 输入

通常无动态输入。附加质量矩阵$M_A$是船体固有特性，在仿真前由船体几何和水动力分析确定。可能的输入包括：

- **船体几何参数**：长度$L$、宽度$B$、吃水$T$等
- **水密度$\rho$**：附加质量与水密度成正比
- **无量纲附加质量系数**：由CFD或势流分析得到

### 输出

- **附加质量矩阵$M_A$**：6×6对称矩阵，单位为kg和kg·m²

输出矩阵的典型结构：

$$M_A = -\begin{pmatrix}
X_{\dot{u}} & 0 & 0 & 0 & 0 & 0 \\
0 & Y_{\dot{v}} & 0 & Y_{\dot{p}} & 0 & Y_{\dot{r}} \\
0 & 0 & Z_{\dot{w}} & 0 & Z_{\dot{q}} & 0 \\
0 & Y_{\dot{p}} & 0 & K_{\dot{p}} & 0 & K_{\dot{r}} \\
0 & 0 & Z_{\dot{q}} & 0 & M_{\dot{q}} & 0 \\
0 & Y_{\dot{r}} & 0 & K_{\dot{r}} & 0 & N_{\dot{r}}
\end{pmatrix}$$

注意符号约定：SNAME标准中附加质量系数通常取负值（如$X_{\dot{u}} < 0$），使得$M_A$为正定矩阵。

## 核心计算公式

### 附加质量系数

对于水面船舶，常用的附加质量估算公式：

**纵向附加质量**（surge方向）：
$$X_{\dot{u}} \approx -0.05 \cdot m_{hull}$$

对于细长船体，纵向附加质量通常较小，约为船体质量的5-10%。

**横向附加质量**（sway方向）：
$$Y_{\dot{v}} \approx -\pi\rho \left(\frac{T}{2}\right)^2 L$$

对于椭圆截面船体，可近似为截面浸没面积对应的圆柱附加质量。

**垂向附加质量**（heave方向）：
$$Z_{\dot{w}} \approx -\rho \nabla k_{33}$$

其中$k_{33}$是无量纲附加质量系数，$\nabla$是排水体积。

### 转动附加惯量

**横摇附加惯量**：
$$K_{\dot{p}} \approx -\rho \nabla k_{44} B^2$$

**纵摇附加惯量**：
$$M_{\dot{q}} \approx -\rho \nabla k_{55} L^2$$

**艏摇附加惯量**：
$$N_{\dot{r}} \approx -\rho \nabla k_{66} L^2$$

无量纲系数$k_{ii}$通常由势流理论或实验确定。

### 耦合项

对于非对称船体或质心偏离情况，会存在耦合附加质量项。例如：
- $Y_{\dot{r}}$：横向加速度与艏摇角加速度的耦合
- $K_{\dot{p}}$：横摇与横向运动的耦合

对称船体的许多耦合项为零。

## 附加质量的物理意义

| 系数 | 物理含义 |
|------|----------|
| $X_{\dot{u}}$ | 纵向加速时需额外加速的水质量 |
| $Y_{\dot{v}}$ | 横向加速时需额外加速的水质量 |
| $Z_{\dot{w}}$ | 垂向加速时需额外加速的水质量 |
| $K_{\dot{p}}$ | 横摇角加速时需额外加速的水转动惯量 |
| $M_{\dot{q}}$ | 纵摇角加速时需额外加速的水转动惯量 |
| $N_{\dot{r}}$ | 艏摇角加速时需额外加速的水转动惯量 |

## 与其他模块的关系

- **Inertials模块**：接收$M_A$与$M_{RB}$相加得到总惯性矩阵$M$
- **Coriolis模块**：使用$M_A$计算附加质量产生的科氏力$C_A(\nu)\nu$
- **6DOF模块**：使用总惯性矩阵求解加速度$\dot{\nu} = M^{-1}\tau_{net}$

## 注意事项

1. **低频近似**：本模型假设附加质量为常数，适用于低频运动。高频波浪激励下附加质量可能随频率变化。

2. **深水假设**：附加质量公式通常假设深水条件。浅水中附加质量会增大。

3. **对称性**：物理上$M_A$应为对称矩阵。如果输入系数不满足对称性，应检查数据来源。

4. **正定性**：$M_A$必须是正定矩阵，确保系统稳定性。

## 总结

Added Mass模块是水动力计算的基础，它量化了船体与周围水体的惯性耦合效应。正确的附加质量数据对于准确模拟船舶的加速响应和动态特性至关重要。
