# Payload 载荷模块分析

## 模块功能说明

**Payload（载荷）**模块表示船体上可附加的额外载荷（如货物、设备）的参数，对船舶惯性和重心产生影响。在模型中，船体本身（不含载荷）的质量性质和几何参数通常在模型中固定，但如果有额外载荷，尤其是位于船体某处，会改变：

- **总质量 $m_{\text{total}}$**: = 船体自重 + 载荷质量。

- **总体惯性张量**: 载荷的质量分布会贡献额外转动惯量。

- **重心位置**: 载荷若不在原船体重心，会将系统质心偏移向载荷所在方向。

Payload模块的作用就是**提供载荷的关键参数**给船体平台模块，以便后者计算新的惯性矩阵和重心位置。这些参数通常包括：

- **载荷质量 $m_p$**（单位：kg）。

- **载荷相对于船体参考点的位置**（3维向量，例如在船体坐标系下的位置$(x_p, y_p, z_p)$）。这里参考点一般取船体的坐标原点（CO）。如果CO在几何中心或其他已知点，则载荷位置用相对于CO的坐标描述。

- **载荷的转动惯量**（如有必要）。如果载荷体积较大，也需要提供其自身绕质心的惯性张量$I_p$，以及通过平行轴定理转移到CO的转动惯量。如果载荷相对较小或被视为点质量，可忽略转动惯量，仅由其质量和位置贡献整体惯性。

实际应用中，载荷参数可能来自用户输入或传感器数据。例如在仿真初始化时，用户指定有一重$m_p=500\ \text{kg}$的货物位于船前部$x=5\ \text{m}$处，则载荷模块应输出相应的质量和位置。

## 在层级中的位置

```
Subsystem (SID:748)
├── Environment
├── Payload          ← 本模块
└── Vessel Platform
```

## 输入输出端口

### 输入

一般无动态输入；载荷属性在仿真前配置。某些情景下，载荷可能随时间变化（如投放载荷减轻重量），此时可通过外部信号改变载荷模块的参数输出。但是当前结构未提及此类输入，推测载荷是恒定的。

### 输出

Payload模块输出载荷有关的参数信号，供下游**Input Processing**模块使用：

| 参数 | 单位 | 说明 | 下游用途 |
|------|------|------|----------|
| Payload Mass ($m_p$) | kg | 载荷质量 | 修正总体质量矩阵、计算排水体积 |
| Payload CG Position ($\mathbf{r}_p$) | m | 载荷重心位置(3×1向量) | 修正船体重心坐标 |
| Payload Inertia ($I_p$) | kg·m² | 载荷自身惯性张量(可选) | 惯性矩阵修正 |

这些输出会进入**Input Processing**子系统内相关模块：

- "CG corrected for payload"模块会使用$m_p$和$\mathbf{r}_p$与船体原始重心计算新的整体重心。
- "Inertial Matrix (hull + payload)"模块会将载荷质量和惯性并入船体惯性矩阵。
- "Volume"模块可能用到总质量（包含载荷）计算排水体积。

**注意：** 一般船体本身的参数（无载荷时的质量$m_h$、船体重心$\mathbf{r}_{h}$、惯性$I_h$等）是预存在模型中的定值。载荷模块输出与这些定值结合，构成新参数。在本模型中，船体参数和载荷参数的结合是在Input Processing中完成的。

## 核心计算公式

Payload模块本身通常不进行计算，而是提供参数。但是理解这些参数如何用于后续计算是重要的：

### 组合质心计算

载荷导致的新重心位置：

$$\mathbf{r}_{G,\ new} = \frac{m_h \mathbf{r}_{h} + m_p \mathbf{r}_{p}}{m_h + m_p}$$

其中$m_h,\ \mathbf{r}_{h}$是船体原本的质量和重心位置，$\mathbf{r}_{p}$是载荷位置。该公式将在"CG corrected"模块中实际应用，用于计算新的总质心位置。

### 组合总质量

$$m_{\text{total}} = m_h + m_p$$

（Input Processing会直接求和获得。）

### 惯性张量叠加

总惯性$I_{\text{total}}$可以通过将载荷的惯性转移到同一参考点然后加和：

$$I_{\text{total}} = I_h(CO) + \Big( I_p + m_p [S(\mathbf{r}_{p})]^2 \Big)$$

即：船体关于CO的惯性 + （载荷自身惯性绕自身质心 + 载荷质量按距CO偏移$\mathbf{r}_{p}$产生的平行轴增量）。这里$S(\mathbf{r}_{p})$是将位置向量构造成的反对称矩阵，用于计算平行轴公式$ m_p d^2$部分的张量形式。

如果载荷尺寸可忽略当作点质量，则$I_p$趋近0，上式主要是$m_p [S(\mathbf{r}_{p})]^2$部分贡献转动惯量。

以上计算并不在Payload模块内部执行，但Payload模块提供了需要的信息。通过将载荷与船体参数分离，模型更具模块化：改变或移除载荷无需改动船体基础模型，只调整该模块的输出即可。这使仿真可以方便地评估不同载荷方案对稳定性和运动响应的影响。

## 对船舶动力学的影响

### 1. 排水体积影响

$$\nabla = \frac{m_h + m_p}{\rho}$$

载荷质量直接影响排水体积，进而影响浮力和吃水深度。

### 2. 稳性影响

载荷位置影响GM值（稳心高度），进而影响：
- 横摇稳性
- 纵倾稳性
- 自振频率

载荷位于高处会抬高重心，降低GM值，使船体稳性变差。

### 3. 惯性矩阵影响

载荷的质量和位置会改变整体的惯性矩阵：
- 修正刚体惯性矩阵 $M_{RB}$
- 影响各自由度的转动惯量
- 改变科氏力计算中使用的质心位置

## 典型载荷类型

| 载荷类型 | 说明 |
|----------|------|
| 传感器设备 | 雷达、相机、激光雷达等 |
| 通信设备 | 天线、无线电设备 |
| 电池/燃料 | 能源系统 |
| 科研设备 | 采样器、探测器等 |
| 货物 | 运输物品 |

## 示例计算

假设无载货时船重心$\mathbf{r}_h=(0,\ 0,\ 2\ \text{m})$ (距底部2m)，$m_h=10000\ \text{kg}$。现在加一载荷$m_p=2000\ \text{kg}$在甲板高5m处($z_p=5$m)，位于船中纵向($x_p=0$)偏右1m($y_p=1$m)。则：

- $x_G = \frac{10000 \times 0 + 2000 \times 0}{12000} = 0$ (重心纵向不变在中间)。
- $y_G = \frac{10000 \times 0 + 2000 \times 1}{12000} \approx 0.167\ \text{m}$ (重心右移0.167m，表示有点偏载)。
- $z_G = \frac{10000 \times 2 + 2000 \times 5}{12000} = \frac{20000 + 10000}{12000} = 2.5\ \text{m}$ (重心高度提高到2.5m)。

可见载荷抬高了重心高度并使其稍微偏向右。这将降低横向稳性（$GM$减小），这是载荷影响的重要方面。
