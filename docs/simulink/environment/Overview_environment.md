# Environment 模块说明

## 概述

本文档说明了 USV 仿真模型中 Environment（环境）模块的功能和参数设置。该模块主要负责提供仿真环境的基本物理参数，包括流场信息、水体密度以及重力加速度。

## 模块功能

Environment 模块为仿真系统提供以下环境参数：

### 1. 流的速度和方向

流场参数用于模拟海流或水流对船体的影响。流的速度和方向定义了水体相对于地球坐标系的运动状态。

**参数说明：**

- **流速**：水流的速度大小，单位为 m/s
- **流向**：水流的方向角度，遵循 NED（North-East-Down）坐标系约定
  - 0° 表示正北方向
  - 90° 表示正东方向
  - 角度单位：弧度制（rad）

**物理意义：**

在船舶动力学方程中，流场影响体现在相对速度的计算：

$$
\nu_r = \nu - \nu_c
$$

其中：
- $\nu$ 为船体绝对速度
- $\nu_c$ 为流速（海流速度矢量）
- $\nu_r$ 为船体相对于水流的速度

流场速度直接影响船体所受的水动力载荷，包括阻尼力和附加质量力：

$$
F_{\text{hydro}} = M_A \dot{\nu}_r + C_A(\nu_r)\nu_r + D(\nu_r)\nu_r
$$

### 2. 水的密度

水的密度是计算各种水动力的基础参数。

**参数说明：**

- **符号**：$\rho$
- **单位**：kg/m³
- **典型值**：
  - 淡水：约 1000 kg/m³
  - 海水：约 1025 kg/m³（根据盐度和温度略有变化）

**物理意义：**

水的密度直接影响以下计算：

1. **浮力计算**：

$$
F_{\text{buoyancy}} = \rho g \nabla
$$

其中 $\nabla$ 为排水体积。

2. **水动力系数**：附加质量、阻尼系数等水动力参数都与水的密度成正比。

3. **静水恢复力**：

$$
g(\eta) = -\rho g A_w z
$$

其中 $A_w$ 为水线面面积，$z$ 为垂向位移。

### 3. 重力加速度

重力加速度是计算重力相关力和力矩的基础参数。

**参数说明：**

- **符号**：$g$
- **单位**：m/s²
- **标准值**：9.81 m/s²（地球表面标准重力加速度）
- **变化范围**：根据地理位置和海拔高度，重力加速度在 9.78～9.83 m/s² 之间变化

**物理意义：**

重力加速度主要影响：

1. **重力**：

$$
F_{\text{gravity}} = m g
$$

其中 $m$ 为船体质量。

2. **静水恢复力矩**：船体在横倾或纵倾时，重力与浮力形成的恢复力矩：

$$
M_{\text{restoring}} = \rho g \nabla GM \sin(\theta)
$$

其中 $GM$ 为稳心高，$\theta$ 为横倾角。

3. **吃水变化**：船体垂向运动时的静水恢复力：

$$
F_z = \rho g A_w z
$$

## 环境参数对仿真的影响

Environment 模块提供的参数是整个仿真系统的基础，它们影响：

- **船体运动轨迹**：流场速度和方向直接改变船体的运动路径
- **动力性能**：水的密度影响推进效率和机动性能
- **稳定性**：重力加速度和水密度共同决定船体的稳性特性
- **能耗**：流场和水动力特性影响推进器的功率需求

## 使用建议

1. **流场设置**：
   - 根据实际海域的海流数据设置流速和流向
   - 考虑潮汐、风驱流等因素的影响
   - 在控制算法测试时，可设置不同流况以验证鲁棒性

2. **水密度设置**：
   - 淡水环境使用 1000 kg/m³
   - 海水环境使用 1025 kg/m³
   - 特殊水域可根据实测数据调整

3. **重力加速度设置**：
   - 一般仿真使用标准值 9.81 m/s²
   - 高精度仿真可根据地理位置修正
   - 特殊应用（如外星球环境）可修改此参数

## 总结

Environment 模块是 USV 仿真系统的基础模块，提供了流场、水密度和重力加速度等关键环境参数。正确设置这些参数对于获得准确的仿真结果至关重要。在实际使用中，应根据具体应用场景和仿真目的合理配置环境参数。
