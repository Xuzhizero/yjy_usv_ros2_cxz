# Simulink水动力学阻尼模块分析

## 1. 模块功能概述

### 提问

![Damping Module](https://cdn.nlark.com/yuque/0/2025/png/2408029/1752651567402-b4a84a94-1767-40b7-8a05-80128043d31d.png)

你前面提到——[ω₃ ω₄ ω₅]：竖向、横摇、纵倾三自由度的固有频率

这个固有频率（Natural frequencies）被用在了图中这个Hydrodynamics中的Damping(Hydrodynamics)这个模块里面。介绍一下这个模块的功能/固有频率的作用和整个模块起作用的机理。

### 回答

下面这个"Damping"子模块的作用，就是根据当前各自由度的速度（u,v,w,p,q,r），计算出线性粘滞阻尼力/力矩τ_damp，并送入六自由度运动方程。它内部实际上是在构造一个对角的阻尼系数矩阵D，使得：

$$\tau_\text{damp} = -D \begin{bmatrix}u\\v\\w\\p\\q\\r\end{bmatrix} \quad\text{其中}\quad D=\text{diag}([X_u, Y_v, Z_w, K_p, M_q, N_r])$$

下面逐路径解释，各个阻尼系数是如何借助固有频率 ω₃,ω₄,ω₅（heave/roll/pitch）以及其他参数算出来的。

---

### 1.1 垂荡、横摇、纵倾方向的线性阻尼：Zw、Kp、Mq

**输入：**

- **Inertials**：对应三个模态的等效惯性（heave 用的是质量 M₃₃；roll 用的是转动惯量 Iₓₓ；pitch 用的是 Iᵧᵧ）。
- **Natural Frequencies**：对应三个模态的固有角频率 ω₃ (heave)、ω₄ (roll)、ω₅ (pitch)。
- **Damping ratios**：在模块里硬编码为 ζ_heave=0.3、ζ_roll=0.2、ζ_pitch=0.4。

**计算机理：**

任何线性二阶系统（惯性 M、刚度 G）自然频率满足：

$$\omega = \sqrt{\frac{G}{M}}$$

若我们希望阻尼比 ζ（通常小于1），则临界阻尼系数应取：

$$C_\text{crit} = 2 M \omega$$

真实阻尼系数就是：

$$C = 2 \zeta M \omega$$

因此模块里先用一个 MUX 把对应的 M 和 ω 串联，再过一个 "×(–2)"（负号表示阻尼力与速度反向），得到临界阻尼，再分别乘以 ζ_heave、ζ_roll、ζ_pitch，最终输出：

$$\begin{cases}
Z_w = -2\zeta_\text{heave} M_{33} \omega_3\\
K_p = -2\zeta_\text{roll} I_{xx} \omega_4\\
M_q = -2\zeta_\text{pitch} I_{yy} \omega_5
\end{cases}$$

---

### 1.2 侧荡方向的非线性"横流"阻尼：Yv

**输入：**

- **Relative Velocity** 中的纵向速度 u（取绝对值）。

**计算公式：**

模块里用一个"|u|×10 + 1"的形式，再乘以–1，得到对v的阻尼系数：

$$Y_v = -(1 + 10|u|)$$

这是一种经验式的横流黏滞阻尼，随前进速度加大而非线性增大。

---

### 1.3 纵向（冲）方向的阻尼：Xu

**输入：**

- **Gravity**（g）
- 以及一个经验常数"–24.4/U_max"的增益块

**计算：**

把 g 乘以该增益，得到 Xu（与 u 同向的线性阻尼系数）：

$$X_u = -\frac{24.4}{U_{\max}} g$$

这也是工业上常见的经验区间。

---

### 1.4 偏航方向的阻尼：Nr

**输入：**

- **Inertials** 中的偏航转动惯量 I_zz
- **T_yaw**（偏航自然周期）

**计算：**

简化为用周期倒数来近似阻尼：

$$N_r = -\frac{I_{zz}}{T_{\text{yaw}}}$$

（负号保证阻尼力矩反向于角速度 r。）

---

### 1.5 总线输出与作用机理

- 上述六个系数分别汇入一个多路复用器，形成 $X_u, Y_v, Z_w, K_p, M_q, N_r$。
- 最后与当前速度向量 $[u,v,w,p,q,r]$ 相乘，即得到阻尼力和阻尼力矩 $\tau_\text{damp}$。
- 阻尼模块模拟了水体对各自由度运动的逐项耗散，配合刚度（静水恢复力）和外部激励，共同决定船体的动态响应。

---

**总结：**

这个 Damping 模块利用 **固有频率**（ω₃,ω₄,ω₅）结合 **等效惯性**，按 $C=2\zeta M\omega$ 原理给出 heave/roll/pitch 的线性阻尼；用经验公式给出 surge、sway、yaw 的阻尼系数；最后形成对角阻尼矩阵，直接与速度相乘，完成粘滞耗散力/力矩的计算。

---

## 2. 阻尼矩阵对角化条件

### 提问

![Damping Matrix](https://cdn.nlark.com/yuque/0/2025/png/2408029/1755138152052-4673db31-3f34-453a-a3cb-81454f0b2734.png)

什么时候可以转化为对角阵？

### 回答

像图中的 $D_{\text{lin}}$ 这种线性阻尼矩阵，能否转化为对角阵，取决于**是否存在自由度间的水动力耦合**。

#### 2.1 可以转化为对角阵的条件

- 船体形状、对称性较高（比如纵向、横向、垂向三个平移方向之间没有显著耦合）。
- 选取的船体坐标系刚好是**水动力中心**或**对称中心**，这样水动力作用不会引起交叉耦合力矩。
- PMM 试验或 CFD 得出的交叉阻尼系数（如 $Y_r$、$N_v$、$Z_q$、$M_w$ 等）非常小，可以近似为零。

在这种情况下，$D_{\text{lin}}$ 近似为：

$$D_{\text{lin}} \approx \text{diag}(X_u, Y_v, Z_w, K_p, M_q, N_r)$$

每个自由度的阻尼只与本自由度速度有关。

#### 2.2 不能转化为对角阵的情况

- 船体非对称（如单侧舷装有推进器、舵、侧推等）。
- 流体绕射或兴波效应导致不同自由度间显著耦合。
- 小型船舶在大航速下，横荡与艏摇、垂荡与纵摇之间往往存在明显的阻尼耦合。

#### 2.3 工程处理建议

- **初步建模/控制器设计**：可以将小的耦合项近似为零，把 $D_{\text{lin}}$ 对角化，简化计算。
- **高精度操纵性仿真**：应保留 PMM/CFD 测得的交叉阻尼项，保持矩阵非对角形式。

---

## 3. 关键参数解释

### 提问

![Parameters](https://cdn.nlark.com/yuque/0/2025/png/2408029/1755139188737-d9fdfbeb-1363-457a-b028-86e2a8f5cbd1.png)

其中的M₃₃和ω₃分别代表什么？

### 回答

根据图片中的内容和船舶动力学理论：

**M₃₃** 代表：

- **第3个自由度（Heave）的等效质量**
- 在6×6质量矩阵中第3行第3列的元素
- 即垂荡方向的惯性参数（质量）

**ω₃** 代表：

- **第3个自由度（Heave）的固有频率**
- 即垂荡模态的自然振动频率

#### 背景解释

在船舶六自由度系统中，各自由度按顺序编号：

1. Surge（纵荡）
2. Sway（横荡）
3. **Heave（垂荡）** ← 第3个自由度
4. Roll（横摇）
5. Pitch（纵摇）
6. Yaw（艏摇）

因此：

- M₃₃ 是质量矩阵中垂荡方向的对角元素，表示船舶在垂直方向运动时的惯性
- ω₃ 是垂荡的固有频率，由 $\omega = \sqrt{G/M}$ 计算得出，其中G是恢复力系数

在阻尼计算公式 $Z_w = -2\zeta_{\text{heave}} M_{33} \omega_3$ 中：

- $Z_w$ 是垂荡方向的线性阻尼系数
- $\zeta_{\text{heave}} = 0.3$ 是垂荡的阻尼比
- $M_{33}$ 和 $\omega_3$ 共同决定了垂荡运动的动力学特性

---

## 4. Yaw偏航阻尼详细分析

### 提问

![Yaw Damping](https://cdn.nlark.com/yuque/0/2025/png/2408029/1766029306989-effee72d-d260-4bf1-9da9-6910e96bab35.png)

帮我分析一下这个里面Yaw部分阻尼力矩计算的表达式和对应的Simulink接线机理。

### 回答

你这张图红框里其实是在**构造偏航阻尼矩的系数 ($N_r$)**，并且让它随**纵向相对速度 ($|u|$)** 增大而增大；最后在右侧统一把各阻尼系数 ($[X_u,Y_v,Z_w,K_p,M_q,N_r]$) 与相对速度向量 ($\nu_r=[u,v,w,p,q,r]^T$) 相乘，得到阻尼力/力矩 ($\tau_{\text{damp}}$)。

下面把 **Yaw（偏航）部分**的表达式和"接线机理"拆开讲清楚。

---

### 4.1 红框里最终要算的是什么？

红框右侧输出进那根竖向汇总总线（标了 Xu、Yv、Zw、Kp、Mq、**Nr**）的量，是 **偏航阻尼系数 ($N_r$)**（用于 yaw rate (r) 的阻尼矩）。

随后在最右边的大乘法块里做：

$$\tau_{\text{damp}} = -D \cdot \nu_r$$

因此 **偏航阻尼力矩分量**就是：

$$N_{\text{damp}} = N_r \cdot r$$

其中 $N_r$ 在红框里被做成了"随 $|u|$ 增大而增大"的形式。

---

### 4.2 红框里 Yaw 阻尼系数 ($N_r$) 的表达式

从接线图看，红框里 $N_r$ 是这样构造的（结构非常典型）：

#### (A) 基础偏航阻尼系数（由惯量 + 时间常数给出）

上支路：从 **Inertials** 里取出某个惯量项（基本可以判定是 $I_{zz}$），再结合一个常数 **T_yaw**（偏航时间常数/期望时间尺度），形成一个基础系数：

$$N_{r0} = -\frac{I_{zz}}{T_{\text{yaw}}}$$

对应接线：

- `U/Y` 选择器：从 `Inertials` 里"取出某个量"（多半是 $I_{zz}$）
- 旁边的 `T_yaw` 常数：提供 $T_{\text{yaw}}$
- 中间那个带 "x / +" 图标的块：通常是 **乘除组合（Product/Divide）** 的一种配置（你这里的意图基本就是做 $I_{zz}/T_{yaw}$ 或类似组合）
- 后面的 `-1` 增益：把符号变为负号（形成阻尼方向）

> 你这条线上标了 "Nr"，说明这条线确实是在形成 yaw 的阻尼系数，而不是直接形成力矩。

#### (B) 速度相关的放大因子（随 $|u|$ 增大）

下支路：从 **Relative Velocity** 里取出纵向相对速度 $u$，取绝对值，再做线性放大并加 1：

$$f(u) = 1 + 10|u|$$

对应接线：

- `U/Y`：从 Relative Velocity 里选出 $u$ 分量
- `|u|`：绝对值
- `10`：增益
- `+` 与常数 `1`：得到 $1+10|u|$

#### (C) 合成最终的 $N_r$

最后用右侧竖着的乘法块把两条支路相乘：

$$N_r = N_{r0} \cdot f(u) = \left(-\frac{I_{zz}}{T_{\text{yaw}}}\right)\left(1+10|u|\right)$$

于是偏航阻尼力矩就是：

$$N_{\text{damp}} = N_r \cdot r = \left(-\frac{I_{zz}}{T_{\text{yaw}}}\right)\left(1+10|u|\right) r$$

---



