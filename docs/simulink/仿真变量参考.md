# 仿真变量参考

本文档记录 Simulink 仿真模型所使用的工作区变量及其物理含义，并提供从 MATLAB 工作区快速导出变量的方法。

## 变量总览

以下是当前仿真模型使用的主要标量变量：

### 船体几何与物理参数

| 变量名 | 数值 | 单位 | 物理含义说明 |
|--------|-----:|------|--------------|
| L | 30.5 | m | 船体水线长，决定尺度、波浪相互作用与航行性能 |
| B | 5.5 | m | 船体型宽（Beam），影响横向稳定性与横摇特性 |
| T_design | 1.05 | m | 设计吃水（Design Draft） |
| m | 90300 | kg | 船体总质量（含载荷） |
| nabla | 88.0976 | m³ | 排水体积（浮力计算的核心参数） |
| LCF | -2.21 | m | 浮心纵向位置（Longitudinal Center of Flotation），相对参考点 |

### 浮筒参数

| 变量名 | 数值 | 单位 | 物理含义说明 |
|--------|-----:|------|--------------|
| Aw_pont | 57.8737 | m² | 单个浮筒的湿表面积，用于计算摩擦阻力或粘性阻尼 |
| Aw_total | 115.7475 | m² | 全船总湿表面积（通常为多个浮筒之和），用于总阻力/能耗估算 |
| B_pont | 0.25 | m | 单个浮筒宽度，用于浮筒水动力或几何建模 |
| Cb_pont | 0.496 | – | 浮筒方形系数（Block Coefficient），反映浮筒体型饱满程度 |
| Cw_pont | 0.69 | – | 浮筒水线面系数（Waterplane Coefficient），影响浮力与纵摇特性 |
| y_pont | 2.75 | m | 浮筒横向位置（相对中线），影响横向稳定性 |

### 惯量与质量修正参数

| 变量名 | 数值 | 单位 | 物理含义说明 |
|--------|-----:|------|--------------|
| Delta_m | 20 | kg | 质量修正量或附加质量调节参数（常用于配平或模型校正） |
| I_L | 0.2667 | – | 纵向惯量修正系数（可能用于滚转/纵摇惯量无量纲化） |
| I_T | 0.12 | – | 横向惯量修正系数（可能用于横摇惯量无量纲化） |

### 阻尼系数

| 变量名 | 数值 | 单位 | 物理含义说明 |
|--------|-----:|------|--------------|
| R44 | 0.12 | – | 横摇（Roll）阻尼/恢复相关系数 |
| R55 | 0.12 | – | 纵摇（Pitch）阻尼/恢复相关系数 |
| R66 | 0.12 | – | 航向（Yaw）阻尼/恢复相关系数 |

### 控制与运动参数

| 变量名 | 数值 | 单位 | 物理含义说明 |
|--------|-----:|------|--------------|
| T_yaw | 18 | s | 航向控制时间常数或偏航响应特征时间 |
| Umax | 10 | m/s | 最大航速上限（控制或物理约束） |
| k_neg | 0.0064 | – | 负向控制增益或非线性阻尼系数（反向工况） |
| k_pos | 0.0111 | – | 正向控制增益或非线性阻尼系数（正向工况） |
| kappa | 0.1 | – | 曲率/控制权重系数（常用于航迹或转向控制） |
| R_switch_m | 5 | – | 阻尼或控制模型的切换阈值（如速度/转速/工况判断） |

### 推进系统参数

| 变量名 | 数值 | 单位 | 物理含义说明 |
|--------|-----:|------|--------------|
| l1 | 1.005 | m | 左螺旋桨距中轴线距离 |
| l2 | 1.005 | m | 右螺旋桨距中轴线距离 |

### 仿真控制参数

| 变量名 | 数值 | 单位 | 物理含义说明 |
|--------|-----:|------|--------------|
| StopTime | 200 | s | 仿真结束时间 |
| trim_setpoint | 280 | – | 纵倾/配平控制目标值（可能为角度或控制内部量） |

---

## 从 MATLAB 工作区导出变量

在模型参数发生变化后，可使用以下脚本快速导出所有标量变量到 Markdown 表格：

```matlab
% 获取工作区所有变量信息
vars = whos;

% 筛选标量 double 变量
mask = arrayfun(@(s) isequal(s.size,[1 1]) && strcmp(s.class,'double'), vars);

names = {vars(mask).name}.';
vals  = nan(numel(names),1);

for i = 1:numel(names)
    vals(i) = eval(names{i});
end

% 输出到文件
fid = fopen('scalars.md','w');
fprintf(fid, '| Name | Value |\n');
fprintf(fid, '|---|---:|\n');
for i = 1:numel(names)
    fprintf(fid, '| %s | %.15g |\n', names{i}, vals(i));
end
fclose(fid);

disp('变量已导出到 scalars.md');
```

运行后会在当前目录生成 `scalars.md` 文件，内容格式如下：

```markdown
| Name | Value |
|---|---:|
| B | 5.5 |
| L | 30.5 |
| m | 90300 |
...
```

### 使用说明

1. 在 MATLAB 命令窗口中加载模型并运行初始化脚本
2. 复制上述代码到命令窗口执行
3. 打开生成的 `scalars.md` 查看结果
4. 将更新后的数值整理到本文档中

---

## 相关文档

- [船体规格参数](船体规格参数.md) - 船体尺寸和推力曲线
- [Simulink模型参数解析](Simulink模型参数解析.md) - 初始条件和时间步长结构体
- [Inertials变量来源说明](Inertials变量来源说明.md) - 惯性参数说明
