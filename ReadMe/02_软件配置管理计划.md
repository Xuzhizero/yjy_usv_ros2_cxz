# 软件配置管理计划
## 无人船多机实时通讯与目标检测系统

**项目名称**: 无人船ROS2多机实时通讯与目标自动检测系统
**文档版本**: v1.0
**编写日期**: 2026-01-23
**编写人**: 项目开发团队

---

## 1. 引言

### 1.1 目的
本配置管理计划旨在建立项目配置管理的标准和流程，确保软件开发过程中代码、文档、配置等各类配置项得到有效管理和控制。

### 1.2 适用范围
本计划适用于无人船ROS2多机实时通讯与目标自动检测系统的全生命周期，包括需求分析、设计、开发、测试、部署和维护阶段。

### 1.3 术语定义
- **配置项(CI)**: 被配置管理控制的软件或硬件元素
- **基线(Baseline)**: 经过评审和批准的配置项的稳定版本
- **变更控制**: 对配置项变更的评审和批准过程
- **版本控制**: 对配置项版本的跟踪和管理

---

## 2. 配置管理组织

### 2.1 配置管理角色

| 角色 | 职责 |
|------|------|
| **配置管理员(CCB)** | - 维护Git仓库<br>- 审核配置变更<br>- 管理分支策略<br>- 发布版本标签 |
| **开发人员** | - 遵循分支命名规范<br>- 提交代码和文档<br>- 编写提交说明<br>- 参与代码评审 |
| **测试人员** | - 验证配置项功能<br>- 记录测试结果<br>- 反馈缺陷 |
| **项目经理** | - 批准重大变更<br>- 审核基线发布<br>- 协调配置管理活动 |

### 2.2 配置管理流程

```
开发 → 提交 → 代码评审 → 合并主分支 → 测试 → 发布基线
  ↑                                                      ↓
  └──────────────────── 问题反馈 ←──────────────────────┘
```

---

## 3. 配置项标识

### 3.1 配置项分类

#### 3.1.1 代码类配置项

| 配置项 | 路径 | 说明 |
|--------|------|------|
| ROS2节点源码 | `control_planner/` | USV控制和规划节点 |
| 动力学模型 | `dynamics_model/` | 船舶动力学模型 |
| URDF模型 | `urdf/` | 机器人描述文件 |
| Launch文件 | `launch/` | 节点启动配置 |

#### 3.1.2 配置文件类配置项

| 配置项 | 路径 | 说明 |
|--------|------|------|
| DDS配置 | `~/.config/cyclonedds/cyclonedds.xml` | CycloneDDS网络配置 |
| ROS2参数 | `config/*.yaml` | 节点参数配置 |
| 网络配置 | 文档化（无配置文件） | 静态IP配置说明 |

#### 3.1.3 文档类配置项

| 配置项 | 路径 | 说明 |
|--------|------|------|
| 需求规格说明书 | `ReadMe/01_软件需求规格说明书.md` | 功能和性能需求 |
| 配置管理计划 | `ReadMe/02_软件配置管理计划.md` | 本文档 |
| 测试报告 | `ReadMe/03_软件自测试报告.md` | 测试结果 |
| 开发总结报告 | `ReadMe/04_项目开发总结报告.md` | 项目总结 |
| 用户手册 | `ReadMe/05_用户手册.md` | 使用指南 |
| 产品规格书 | `ReadMe/06_软件产品规格书.md` | 产品说明 |
| 技术日志 | `DevLogs/TechnicalLogs/` | 开发过程记录 |
| 问题修复日志 | `DevLogs/BugFixLogs/` | 问题排查记录 |

#### 3.1.4 外部依赖配置项

| 配置项 | 说明 |
|--------|------|
| ROS2 Humble | Ubuntu APT包管理 |
| UE5 | 独立安装 |
| MATLAB/Simulink | 独立安装 |
| CycloneDDS | ROS2自带或独立安装 |

### 3.2 配置项命名规范

#### 3.2.1 文件命名
- Python脚本: `snake_case.py` (如 `usvSim.py`, `keyboard_interactionV2.py`)
- Launch文件: `launch_*.launch.py` (如 `launch_usvSimV2.launch.py`)
- URDF文件: `*_with_*.urdf` (如 `my_ball_with_rudderV2.urdf`)
- 配置文件: `*.yaml` 或 `*.xml`
- 文档: `中文名称.md` 或 `English_Name.md`

#### 3.2.2 版本标识
- 主版本号.次版本号.修订号 (如 v1.0.0, v1.2.3)
- 文件后缀版本: V2, V3 (如 `usvSimV3.py`)

---

## 4. 版本控制管理

### 4.1 版本控制工具
**工具**: Git
**远程仓库**: GitHub (`Xuzhizero/yjy_usv_ros2_cxz`)

### 4.2 分支管理策略

#### 4.2.1 分支命名规范

| 分支类型 | 命名格式 | 示例 | 说明 |
|---------|---------|------|------|
| 主分支 | `main` | `main` | 稳定发布版本 |
| AI开发分支 | `claude/*-SessionID` | `claude/add-project-documentation-9OKk3` | Claude AI开发的功能分支 |
| 功能分支 | `feature/*` | `feature/image-transfer` | 新功能开发 |
| 修复分支 | `bugfix/*` | `bugfix/qos-mismatch` | 问题修复 |
| 发布分支 | `release/*` | `release/v1.0.0` | 版本发布准备 |

#### 4.2.2 分支策略

```
main
  │
  ├─ claude/add-project-documentation-9OKk3  (当前开发分支)
  │
  ├─ claude/ros2-image-message-UbeWP  (已合并)
  │
  ├─ claude/fix-simulink-termination-HHIFT  (已合并)
  │
  └─ claude/fastdds-wired-network-config-Yl9ts  (已合并)
```

**分支规则**:
1. 所有开发必须在功能分支进行
2. AI开发分支必须以 `claude/` 开头，以SessionID结尾
3. 完成开发后通过Pull Request合并到主分支
4. 合并前需通过代码评审和测试
5. 禁止直接向main分支推送

### 4.3 提交规范

#### 4.3.1 提交信息格式

```
<type>: <subject>

<body>

<footer>
```

**type类型**:
- `feat`: 新功能
- `fix`: 问题修复
- `docs`: 文档更新
- `refactor`: 重构
- `test`: 测试相关
- `chore`: 构建/工具配置

**示例**:
```
feat: 添加FastDDS网络配置功能

实现了通过CycloneDDS XML配置绑定有线网卡的功能，确保ROS2通信只通过指定网络接口。

https://claude.ai/code/session_01R391bRxTmMjfktMxSx5EQc
```

#### 4.3.2 提交要求
- 每次提交应包含完整的功能或修复
- 提交信息必须清晰描述变更内容
- AI开发的提交必须包含Claude会话链接
- 大型功能分多次提交，每次提交保持原子性

### 4.4 标签管理

#### 4.4.1 标签命名
- 发布版本: `v<major>.<minor>.<patch>` (如 `v1.0.0`)
- 里程碑: `milestone-<name>` (如 `milestone-network-config`)

#### 4.4.2 标签策略
- 每个正式发布创建版本标签
- 标签应附带发布说明
- 标签不可删除或修改

---

## 5. 变更控制

### 5.1 变更分类

| 变更类型 | 影响范围 | 审批流程 |
|---------|---------|---------|
| **重大变更** | 影响系统架构或接口 | 项目经理审批 + 技术评审 |
| **一般变更** | 功能增强或优化 | 配置管理员审批 |
| **微小变更** | 文档更新、注释修改 | 开发人员自行提交 |

### 5.2 变更流程

```
1. 提出变更请求 (Issue/PR)
       ↓
2. 影响分析
       ↓
3. 变更评审 (Code Review)
       ↓
4. 批准/拒绝
       ↓
5. 实施变更
       ↓
6. 验证变更 (测试)
       ↓
7. 更新配置管理记录
```

### 5.3 Pull Request规范

#### 5.3.1 PR标题格式
```
[类型] 简短描述
```
示例: `[功能] 添加项目质量体系文档`

#### 5.3.2 PR描述模板
```markdown
## 变更概述
简要说明本次变更的目的和内容

## 变更类型
- [ ] 新功能
- [ ] 问题修复
- [ ] 文档更新
- [ ] 重构
- [ ] 性能优化

## 测试情况
- [ ] 已通过单元测试
- [ ] 已通过集成测试
- [ ] 已通过手动测试

## 相关Issue
关闭 #XX 或 关联 #YY

## 检查清单
- [ ] 代码遵循编码规范
- [ ] 已更新相关文档
- [ ] 提交信息符合规范
- [ ] 无编译错误和警告

## 会话链接
https://claude.ai/code/session_XXXXX
```

---

## 6. 基线管理

### 6.1 基线类型

| 基线名称 | 建立时机 | 包含配置项 |
|---------|---------|-----------|
| **需求基线** | 需求评审通过 | 需求规格说明书 |
| **设计基线** | 设计评审通过 | 系统架构文档、接口设计文档 |
| **开发基线** | 功能开发完成 | 源代码、配置文件、构建脚本 |
| **测试基线** | 测试完成 | 测试用例、测试报告、测试数据 |
| **发布基线** | 版本发布 | 所有交付物（代码+文档+配置） |

### 6.2 基线建立流程

```
1. 配置项开发完成
       ↓
2. 内部验证通过
       ↓
3. 提交基线申请
       ↓
4. 配置审核
       ↓
5. 批准并打标签
       ↓
6. 基线归档
```

### 6.3 基线变更
- 基线建立后的配置项变更需经过正式的变更控制流程
- 紧急修复可建立临时分支，修复后合并并重新建立基线

---

## 7. 配置审计

### 7.1 审计类型

#### 7.1.1 物理审计
**目的**: 验证实际配置项与配置管理记录的一致性
**频率**: 每次发布前
**内容**:
- 检查源代码完整性
- 验证文档版本正确性
- 确认配置文件与文档描述一致

#### 7.1.2 功能审计
**目的**: 验证配置项满足需求规格说明
**频率**: 每次基线建立前
**内容**:
- 功能需求覆盖率
- 性能指标达标情况
- 接口规范符合性

### 7.2 审计记录

**审计清单示例**:
```
□ 所有代码已提交到版本库
□ 提交信息符合规范
□ 分支命名正确
□ 无未追踪的配置文件
□ 文档版本号与代码一致
□ 测试用例通过率 ≥ 95%
□ 无高优先级未解决问题
```

---

## 8. 配置状态报告

### 8.1 报告内容
- 配置项清单及版本
- 基线建立情况
- 变更申请统计
- 问题跟踪状态
- 审计结果

### 8.2 报告频率
- 日常: 通过Git提交记录自动跟踪
- 周期: 每个里程碑结束时生成状态报告
- 重大事件: 发布前生成完整配置状态报告

---

## 9. 工具和环境

### 9.1 配置管理工具

| 工具 | 用途 | 备注 |
|------|------|------|
| Git | 版本控制 | 命令行或GUI工具 |
| GitHub | 远程仓库、PR管理 | 项目托管平台 |
| Markdown | 文档编写 | 轻量级标记语言 |
| VSCode/PyCharm | 代码编辑 | 集成Git功能 |

### 9.2 开发环境配置

#### 9.2.1 Ubuntu工控机
```bash
# ROS2环境
source /opt/ros/humble/setup.bash
source ~/yjy_usv_ros2_cxz/install/setup.bash

# Git配置
git config user.name "Your Name"
git config user.email "your.email@example.com"

# 环境变量
export ROS_DOMAIN_ID=10
export CYCLONEDDS_URI=file://$HOME/.config/cyclonedds/cyclonedds.xml
```

#### 9.2.2 Windows仿真机
```powershell
# ROS2环境
call C:\dev\ros2_humble\setup.bat
call C:\workspace\yjy_usv_ros2_cxz\install\setup.bat

# Git配置
git config user.name "Your Name"
git config user.email "your.email@example.com"

# 环境变量
set ROS_DOMAIN_ID=10
set CYCLONEDDS_URI=file://C:/config/cyclonedds.xml
```

---

## 10. 备份和恢复

### 10.1 备份策略

| 备份内容 | 备份频率 | 存储位置 | 保留期限 |
|---------|---------|---------|---------|
| Git仓库 | 实时 | GitHub远程仓库 | 永久 |
| 本地代码 | 每日 | 外部硬盘/NAS | 3个月 |
| 配置文件 | 每周 | 云存储 | 6个月 |
| 发布包 | 每次发布 | 归档服务器 | 永久 |

### 10.2 恢复流程

#### 10.2.1 代码恢复
```bash
# 克隆仓库
git clone https://github.com/Xuzhizero/yjy_usv_ros2_cxz.git

# 切换到指定版本
git checkout v1.0.0

# 或恢复到某个提交
git checkout <commit-hash>
```

#### 10.2.2 配置恢复
- DDS配置文件从文档重新生成
- 网络配置按文档手动配置
- ROS2参数文件从备份恢复

---

## 11. 培训和沟通

### 11.1 培训计划
- 新成员入职培训: Git基础、分支策略、提交规范
- 定期技术分享: 配置管理最佳实践
- 工具使用培训: GitHub PR流程、代码评审技巧

### 11.2 沟通机制
- 代码评审: GitHub Pull Request评论
- 问题跟踪: GitHub Issues
- 文档更新: 通过Git提交和PR通知

---

## 12. 附录

### 12.1 配置管理检查清单

**开发阶段**:
```
□ 创建功能分支 (claude/*)
□ 按规范提交代码
□ 编写单元测试
□ 更新相关文档
□ 提交Pull Request
```

**评审阶段**:
```
□ 代码风格检查
□ 功能正确性验证
□ 测试覆盖率检查
□ 文档完整性审核
□ 批准合并
```

**发布阶段**:
```
□ 所有测试通过
□ 文档更新完毕
□ 创建版本标签
□ 归档发布包
□ 发布说明编写
```

### 12.2 参考文档
- Git官方文档: https://git-scm.com/doc
- GitHub Flow: https://guides.github.com/introduction/flow/
- 语义化版本: https://semver.org/lang/zh-CN/

### 12.3 配置管理记录

**最近基线**:
- v1.0-需求基线 (2026-01-23): 需求规格说明书完成
- v1.0-文档基线 (2026-01-23): 质量体系文档完成

**最近重大变更**:
- 2026-01-15: 添加ROS2图像消息支持
- 2026-01-14: 配置FastDDS有线网卡绑定

---

**文档状态**: ✅ 已完成
**审核状态**: 待审核
**批准状态**: 待批准
**生效日期**: 2026-01-23
